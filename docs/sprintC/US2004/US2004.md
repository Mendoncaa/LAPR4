# US2004 - Upload a Text File with Candidate Data Fields for Verification

## 1. Requirements Engineering

### 1.1. User Story Description

As an Operator, I want to upload a text file with the data fields (requirements) of a candidate for its verification.

### 1.2. Customer Specifications and Clarifications

- **Customer Specification**:
    - The system must allow the Operator to upload a text file containing the data fields of a candidate.
    - The operator has access to all the files submitted by the candidates.
    - The imported file is already filled in by the candidate.
    - The operator will "import" the file into the system, checking if it is syntactically correct, if it is not syntactically correct the file should be rejected


- **Clarifications**:
    - The file format should be standardized (e.g., CSV, TXT) to ensure consistency.
    - If any issues are encountered during verification, validation messages should be displayed to the Operator.

### Recruitment Process Phases

| Phase        | Description                                                                                                      |
|--------------|------------------------------------------------------------------------------------------------------------------|
| Application  | Candidates submit their applications.                                                                            |
| Screening    | Applications are verified against a set of requirements. Applications not meeting the requirements are rejected. |
| Interviews   | (Optional) Accepted candidates may be interviewed. Results are recorded for further analysis.                    |
| Analysis     | Applications are analyzed using all available information. Candidates are ranked based on this analysis.         |
| Result       | Candidates and customers are notified of the final results.                                                      |

### 1.3. Acceptance Criteria

- **Criteria**:
    - The Operator can successfully upload a text file with candidate data fields.
    - Submitting the file means "importing" the file into the system, verifying that it is syntactically correct.
    - Validation messages should be displayed if any issues are encountered during the verification process.

### 1.4. Identified Dependencies

- **Dependencies**:
    - The job opening and its recruitment process must be registered in the system.
    - Create an application.
    - The file format and structure must be predefined.
    - Generates a template file with the data to be entered to validate an application. In US 2004, the Operator, after filling in the specific data of the application (based on the previous template file) submits this file to the system that will be used for the system to evaluate/verify the application.

### 1.5 Input and Output Data

- **Input Data**:
    - Text file with candidate data fields 

- **Output Data**:
    - List aplication
    - Upload Done Successfully or not.
  
### 1.6. System Sequence Diagram (SSD)
![SSD.svg](01.requirements-engineering%2Fsvg%2FSSD.svg)

**Description**:
### Sequence Diagram Analysis

This sequence diagram describes the interaction between the operator and the system to upload a text file with the requirements

1**Important Interactions:**

  - Depending on the validity of the file:
    - If the file is valid, the system records the upload and returns a success message to the operator.
    - If the file is invalid, the system returns an error message to the operator.

2**Alternative Flow:**

  - The diagram uses an alternate structure (`alt`) to handle alternative flows based on the file's validity.

3**Conclusion:**

  - Once the interaction is completed, the diagram ends, indicating the completion of the file upload process.

### 1.7 Other Relevant Remarks

- **Remarks**:
    - Ensure that all candidate data fields are verified before proceeding to the next phase of the recruitment process.

## 2. OO Analysis

### 2.1. Relevant Domain Model Excerpt

![DM.svg](02.analysis%2Fsvg%2FDM.svg)

#### Description
- JobOpening refers to many Applications, indicating that a job opening can have multiple associated applications.
- Application refers to a Candidate, showing that each application is submitted by a candidate.
- Candidate refers to many Applications, showing that a candidate can submit multiple applications.
- JobOpening can refer to a RequirementsSpecification, indicating that a job opening can have a associated requirements specification.

## 3. Design - User Story Realization

### 3.1. Rationale

**The rationale grounds on the SSD interactions and the identified input/output data.**

| Interaction ID | Question: Which class is responsible for... | Answer                          | Justification (with patterns)                                                                  |
|:---------------|:--------------------------------------------|:--------------------------------|:-----------------------------------------------------------------------------------------------|
| Step 1         | User asks to import candidate response      | `UploadRequirementsUI`         | The UI component handles the request from the user to import candidate response.               |
| Step 2         | List applications for selection             | `UploadRequirementsController` | The controller retrieves the list of applications to present to the user.                       |
| Step 3         | Fetches  all applications                   | `ApplicationService`           | The service class fetches all applications for processing.                                       |
| Step 4         | User selects an application                 | `UploadRequirementsUI`         | The UI component prompts the user to select an application.                                      |
| Step 5         | User uploads a text file with requirements  | `UploadRequirementsUI`         | The UI component handles the user's action of uploading a text file with requirements.           |
| Step 6         | Handling the uploaded file                  | `UploadRequirementsController` | The controller receives the uploaded file and the selected application for processing.          |
| Step 7         | Processing the uploaded file                | `UploadRequirementsController` | The controller coordinates the processing of the uploaded file and its association with the application. |
| Step 8         | Updating application responses              | `ApplicationService`           | The service class updates the application responses with the content of the uploaded file.       |
| Step 9         | Notifying the user of success               | `UploadRequirementsController` | The controller notifies the UI component about the success of the update.                        |


### 3.2. Sequence Diagram (SD)
![SD.svg](03.design%2Fsvg%2FSD.svg)

**Description**:
### Sequence Diagram Explanation

This sequence diagram illustrates the interaction between the Operator and the system components (`UploadRequirementsUI`, `UploadRequirementsController`, `ApplicationService`, and `jobApplication`) during the process of uploading a text file with the requirements

1. **Operator Interaction:**
  - The sequence begins with the Operator initiating the process by requesting to import candidate responses.

2. **Retrieving Applications:**
  - The `UploadRequirementsUI` forwards the request to the `UploadRequirementsController` to fetch a list of applications.

3. **Fetching Applications:**
  - The `UploadRequirementsController` interacts with the `ApplicationService` to retrieve all available applications.

4. **Selecting an Application:**
  - The `UploadRequirementsUI` prompts the Operator to select an application.

5. **Uploading File Request:**
  - The Operator requests to upload a text file with requirements.

6. **File Upload Handling:**
  - The `UploadRequirementsUI` forwards the uploaded file along with the selected application to the `UploadRequirementsController` for handling.

7. **File Verification:**
  - The `UploadRequirementsController` checks the grammar and validity of the uploaded file using the `passGrammar()` method.

8. **Valid File Processing:**
  - If the file is valid, the `UploadRequirementsController` coordinates with the `AppService` to upload the requirements responses for the selected application.
  - The `AppService` updates the responses of the `jobApplication` using the `updateResponses()` method.
  - The successful update is acknowledged by returning "Update Successful" messages from the `AppService` to the `UploadRequirementsController`, and then to the `UploadRequirementsUI`.
  - Finally, a success message is returned to the Operator.

9. **Invalid File Handling:**
  - If the file grammar is invalid, an error message is returned directly from the `UploadRequirementsController` to the `UploadRequirementsUI`, which then notifies the Operator.


## 3.3. Class Diagram (CD)

![CD.svg](03.design%2Fsvg%2FCD.svg)


# 4. Tests


## Functional Tests

### 1. Invalid Transition Attempt

# 5. Construction (Implementation)



# 6. Integration and Demo



# 7. Observations


